import{r as l,j as e}from"./index-b92ad479.js";import{q as g,r as b,s as N,t as y,m as w,n as k,c as v,v as L,g as i,w as P,x as D,y as T,z,h as I,A as q,B as V,d as G,k as H,i as O}from"./DefaultLayout-dca0b3b8.js";import{a as p}from"./axios-f13eed09.js";import{S as t}from"./sweetalert2.all-58ecf48c.js";import"./index.es-f1a080d1.js";import"./cil-user-5af1b2f2.js";function R({createLableModalVisible:r,setCreateLableModalVisible:a,habdleCreateLabel:n}){const[d,o]=l.useState({title:""}),m=f=>{const{name:j,value:h}=f.target;o(u=>({...u,[j]:h}))};return e.jsx(e.Fragment,{children:e.jsxs(g,{visible:r,onClose:()=>a(!1),size:"xl",children:[e.jsx(b,{className:"d-flex justify-content-center",closeButton:!1,children:e.jsx(N,{children:"ایجاد برچسب"})}),e.jsx(y,{children:e.jsxs(w,{className:"mb-3",children:[e.jsx(k,{children:"نام برچسب"}),e.jsx(v,{name:"title",type:"text",onChange:m,placeholder:""})]})}),e.jsxs(L,{children:[e.jsx(i,{shape:"rounded-pill",color:"secondary",className:"mt-1 d-block mx-auto",onClick:()=>a(!1),children:"بستن"}),e.jsx(i,{shape:"rounded-pill",color:"primary",className:"mt-1 d-block mx-auto",onClick:()=>n(d),children:"ایجاد"})]})]})})}function _({editLableModalVisible:r,setEditLableModalVisible:a,editLableModalData:n,setEditLableModalData:d,handleEdit:o}){const m=f=>{const{name:j,value:h}=f.target;d(u=>({...u,[j]:h}))};return e.jsx(e.Fragment,{children:e.jsxs(g,{visible:r,onClose:()=>a(!1),size:"xl",children:[e.jsx(b,{className:"d-flex justify-content-center",closeButton:!1,children:e.jsx(N,{children:"ایجاد برچسب"})}),e.jsx(y,{children:e.jsxs(w,{className:"mb-3",children:[e.jsx(k,{children:"نام برچسب"}),e.jsx(v,{name:"title",type:"text",onChange:m,defaultValue:n.title})]})}),e.jsxs(L,{children:[e.jsx(i,{shape:"rounded-pill",color:"secondary",className:"mt-1 d-block mx-auto",onClick:()=>a(!1),children:"بستن"}),e.jsx(i,{shape:"rounded-pill",color:"primary",className:"mt-1 d-block mx-auto",onClick:()=>o(n),children:"تایید"})]})]})})}function X(){const[r,a]=l.useState(!1),[n,d]=l.useState(!1),[o,m]=l.useState(),[f,j]=l.useState([]),[h,u]=l.useState(!1),B=[{key:"title",label:"نام برچسب",_style:{width:"70%"}},{key:"tools",_style:{width:"10%"},label:"",sorter:!1,filter:!1}],c=()=>{u(!0),p.get("/labels").then(s=>{j(s.data),u(!1)}).catch(s=>{console.log(s)})};l.useEffect(()=>{c()},[]),l.useEffect(()=>{h?t.fire({title:"درحال پردازش ... ",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{t.showLoading()}}):t.close()},[h]);const M=s=>{p.post("/labels/",s).then(x=>{t.fire({icon:"success",title:"success",text:x.data.msg}).then(()=>c())}).catch(x=>{console.log(x),t.fire({icon:"warning",title:"warning",text:x.response.data.msg}).then(()=>c())})},F=s=>{t.fire({title:"آیا مطمئن هستید",text:"تمام اطلاعات این برچسب حذف خواهد شد",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6 ",cancelButtonText:"خیر",confirmButtonText:"حذف شود"}).then(x=>{x.isConfirmed&&p.delete("/labels/"+s.id).then(C=>{t.fire({icon:"success",title:"success",text:C.data.msg}).then(()=>c())}).catch(C=>{console.log(C),t.fire({icon:"warning",title:"warning",text:C.response.data.msg}).then(()=>c())})})},S=s=>{d(!0),m(s)},E=()=>{p.patch("/labels/"+o.id,o).then(s=>{t.fire({icon:"success",title:"success",text:s.data.msg}).then(()=>c())}).catch(s=>{console.log(s),t.fire({icon:"warning",title:"warning",text:s.response.data.msg}).then(()=>c())})};return e.jsxs(e.Fragment,{children:[r&&e.jsx(R,{createLableModalVisible:r,setCreateLableModalVisible:a,habdleCreateLabel:M}),n&&e.jsx(_,{editLableModalVisible:n,setEditLableModalVisible:d,editLableModalData:o,setEditLableModalData:m,handleEdit:E}),e.jsx("div",{className:"row justify-content-center mt-5",children:e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"card",children:e.jsxs(P,{className:"text-center",children:[e.jsx(D,{children:e.jsx(T,{variant:"pills",layout:"fill",className:"card-header-pills",children:e.jsx(z,{children:e.jsx(I,{children:"برچسب ها"})})})}),e.jsxs(q,{children:[e.jsx(V,{}),e.jsx(G,{columns:B,columnFilter:!0,columnSorter:!0,items:f,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,paginationProps:{align:"center"},tableFilterLabel:"فیلتر :",tableFilterPlaceholder:"جستجو",noItemsLabel:"",itemsPerPageLabel:"تعداد نمایش در هر صفحه :",scopedColumns:{tools:s=>e.jsxs("td",{className:"py-2",children:[e.jsx(i,{color:"info",variant:"outline",shape:"square",size:"sm",className:"mt-2 mb-2",onClick:()=>S(s),children:"ویرایش"}),e.jsx(e.Fragment,{children:"  "}),e.jsx(i,{color:"danger",variant:"outline",shape:"square",size:"sm",className:"mt-2 mb-2",onClick:()=>F(s),children:"حذف"})]})}}),e.jsx(H,{className:"mt-4 mb-2",children:e.jsx(O,{md:"5",className:"d-flex justify-content-center",children:e.jsx(i,{color:"success",variant:"outline",shape:"rounded-pill",onClick:()=>a(!0),children:"+ ایجاد برچسب"})})})]})]})})})})]})}export{X as default};
