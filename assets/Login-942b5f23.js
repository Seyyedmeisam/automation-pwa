import{r,i as I,j as s,N as S}from"./index-b92ad479.js";import{b as v,E as i,F as o,G as w,H as L,I as k,J as y,K as c,L as d,k as m,M as x,N as _}from"./index.es-f1a080d1.js";import{b as E}from"./axios-f13eed09.js";import{c as z}from"./cil-user-5af1b2f2.js";import{c as F}from"./cil-lock-locked-7ee886ed.js";const H=()=>{const h=E.create({baseURL:"http://localhost:8000/api"}),p={cursor:"pointer"},[u,j]=r.useState(""),[g,C]=r.useState(""),[t,f]=r.useState(""),[l,n]=r.useState("");let N=I();const b=function(a){a.preventDefault(),h.post("/login",{email:u,password:g}).then(e=>(localStorage.setItem("token",e.data.token),localStorage.setItem("user_id",e.data.user.id),localStorage.setItem("role_id",1),localStorage.setItem("first_name",e.data.user.first_name),localStorage.setItem("last_name",e.data.user.last_name),N("/dashboard"))).catch(e=>{e.response.status===401?n("نام کاربری یا رمز عبور اشتباه است"):f(e.response.data.errors)})};return localStorage.getItem("token")!==null?s.jsx(S,{to:"/dashboard"}):s.jsx("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:s.jsx(v,{children:s.jsx(i,{className:"justify-content-center",children:s.jsx(o,{md:8,children:s.jsx(w,{children:s.jsx(L,{className:"p-4",children:s.jsxs(k,{children:[l?s.jsxs("div",{className:"alert alert-danger w-100",role:"alert",children:[l,s.jsx("i",{className:"bi bi-x",style:p,onClick:()=>n(!1)})]}):"",s.jsxs(y,{onSubmit:b,children:[s.jsx("h1",{children:"ورود"}),s.jsxs("p",{className:"text-medium-emphasis",children:[" ","کاربر گرامی برای ورود لطفا ایمیل و رمز عبور خود را وارد کنید"]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs(c,{className:"mb-2",children:[s.jsx(d,{children:s.jsx(m,{icon:z})}),s.jsx(x,{name:"email",placeholder:"ایمیل",autoComplete:"email",onChange:a=>{j(a.target.value)}})]}),t.email?s.jsx("span",{className:"text-danger font-size-error",children:t.email}):""]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs(c,{className:"mb-2",children:[s.jsx(d,{children:s.jsx(m,{icon:F})}),s.jsx(x,{name:"passwor",type:"password",placeholder:"رمز عبور",autoComplete:"current-password",onChange:a=>{C(a.target.value)}})]}),t.password?s.jsx("span",{className:"text-danger font-size-error",children:t.password}):""]}),s.jsxs(i,{children:[s.jsx(o,{xs:6,children:s.jsx(_,{type:"submit",color:"primary",className:"px-4",children:"ورود"})}),s.jsx(o,{xs:6,className:"text-right"})]})]})]})})})})})})})};export{H as default};
