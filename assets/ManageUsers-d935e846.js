import{r as s,j as t}from"./index-b92ad479.js";import{d as x,e as w,f as b,g as i,h as y}from"./DefaultLayout-dca0b3b8.js";import{a as c}from"./axios-f13eed09.js";import{S as a}from"./sweetalert2.all-58ecf48c.js";import"./index.es-f1a080d1.js";import"./cil-user-5af1b2f2.js";function k(){const[u,C]=s.useState({id:localStorage.getItem("user_id"),role_id:localStorage.getItem("role_id"),first_name:localStorage.getItem("first_name"),last_name:localStorage.getItem("last_name")}),[d,m]=s.useState([]);s.useState([]);const[l,o]=s.useState(!1),f=[{key:"avatar",label:"",filter:!1,sorter:!1},{key:"name",label:"نام و نام خانوادگی",_style:{width:"30%"}},{key:"registered",label:"تاریخ عضویت"},{key:"role",label:"سمت",_style:{width:"30%"}},{key:"show_details",label:"",_style:{width:"10%"},filter:!1,sorter:!1}],n=()=>{o(!0),c.post("users/"+u.id).then(e=>{m(e.data),o(!1)}).catch(e=>{a.fire({icon:"warning",title:"Warning",text:e.response.data.message||"There was an error processing your request."})})};s.useEffect(()=>{n()},[]),s.useEffect(()=>{l?a.fire({title:"درحال پردازش ... ",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{a.showLoading()}}):a.close()},[l]);const g=e=>{switch(e){case"Active":return"success";case"Inactive":return"secondary";case"Pending":return"warning";case"Banned":return"danger";default:return"primary"}},h=e=>{a.fire({title:"آیا مطمئن هستید",text:"تمام اطلاعات این کاربر حذف خواهد شد",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6 ",cancelButtonText:"خیر",confirmButtonText:"حذف شود"}).then(p=>{p.isConfirmed&&c.delete("users/"+e.id).then(r=>{n(),a.fire({icon:"success",title:"Success",text:r.data.message})}).catch(r=>{console.log(r),a.fire({icon:"warning",title:"Warning",text:r.response.data.message||"There was an error processing your request."})})})};return t.jsx(x,{activePage:1,cleaner:!0,clickableRows:!0,columns:f,columnFilter:!0,columnSorter:!0,footer:!0,items:d,itemsPerPageSelect:!0,itemsPerPage:5,pagination:!0,paginationProps:{align:"center"},tableFilterLabel:"فیلتر :",tableFilterPlaceholder:"جستجو",noItemsLabel:"",itemsPerPageLabel:"تعداد نمایش در هر صفحه :",scopedColumns:{avatar:e=>t.jsx("td",{children:t.jsx(w,{src:`http://localhost:8000/${e.profile_picture}`})}),status:e=>t.jsx("td",{children:t.jsx(b,{color:g(e.status),children:e.status})}),show_details:e=>t.jsxs("td",{className:"py-2",children:[t.jsx(i,{color:"info",variant:"outline",shape:"square",size:"sm",className:"mt-2 mb-2",children:t.jsx(y,{href:`#/Users/editUser/${e.id}`,active:!0,children:"ویرایش"})}),t.jsx(t.Fragment,{children:"  "}),t.jsx(i,{color:"danger",variant:"outline",shape:"square",size:"sm",className:"mt-2 mb-2",onClick:()=>h(e),children:"حذف"})]}),details:e=>t.jsx(t.Fragment,{})},selectable:!0,sorterValue:{column:"status",state:"asc"},tableFilter:!0,tableProps:{className:"text-center",responsive:!0,striped:!0,hover:!0},tableBodyProps:{className:"align-middle"}})}export{k as default};
