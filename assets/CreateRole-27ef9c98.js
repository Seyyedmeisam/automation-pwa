import{r as a,j as e}from"./index-b92ad479.js";import{a as m}from"./axios-f13eed09.js";import{T as v}from"./Tree-00376234.js";import{S as n}from"./sweetalert2.all-58ecf48c.js";function y(){const[p,u]=a.useState([]),[h,x]=a.useState([]),[r,f]=a.useState(null),[c,j]=a.useState(!0),[l,g]=a.useState({title:"",description:""}),i=t=>{const{name:o,value:s}=t.target;g(b=>({...b,[o]:s}))},d=()=>{m.get("role").then(t=>{j(!1),u(t.data)}).catch(t=>{n.fire(t.response.data.message)})};a.useEffect(()=>{d()},[]),a.useEffect(()=>{c?n.fire({title:"درحال پردازش ... ",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{n.showLoading()}}):n.close()},[c]);function N(t){t.preventDefault();const o=new FormData;o.append("title",l.title),o.append("description",l.description),o.append("parent_id",r),m.post("role",o).then(s=>{s.status==200&&d(),n.fire(s.data.msg),n.fire({icon:"success",title:"Success",text:s.data.msg})}).catch(s=>{console.log(s.response),s.response.status==422&&n.fire({icon:"warning",title:"Warning",text:s.response.data.message||"There was an error processing your request."})})}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container mt-5",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header text-center",children:e.jsx("h4",{className:"mb-0",children:"فرم ایجاد نقش"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"form-group mb-1",children:[e.jsx("label",{htmlFor:"name",className:"mb-1",children:"عنوان:"}),e.jsx("input",{type:"text",className:"form-control",id:"name",name:"title",placeholder:"عنوان را وارد کنید",value:l.title,onChange:i})]}),e.jsxs("div",{className:"form-group mb-1",children:[e.jsx("label",{htmlFor:"exampleTextarea",className:"mb-1",children:"توضیحات نقش:"}),e.jsx("textarea",{className:"form-control",id:"Textarea",name:"description",rows:"3",placeholder:"متن خود را وارد کنید",value:l.description,onChange:i})]}),e.jsxs("div",{className:"form-group mb-2",children:[e.jsx("label",{htmlFor:"exampleSelect",className:"mb-1",children:"پدر این نقش را انتخاب کنید:"}),e.jsx(v,{data:p,expandedNodes:h,setExpandedNodes:x,selectedNode:r,setSelectedNode:f})]}),e.jsx("button",{type:"submit",className:"btn btn-success mt-1 d-block mx-auto",children:"ایجاد نقش"})]})})]})})})})})}export{y as default};
